 ;??????????????????????????????????????????????????????????
 ;??                                                      ??
 ;??         „„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„ץ          ??
 ;??         ? ? ? ? ? ? ? ? ? ?   L O C K E R ?          ??
 ;??         €„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„„™          ??
 ;??                                                      ??
 ;?? ?¢?  ??נ‎?¢ ¯ פ ??  ??  COM ¢נפ , "? פנ  ®© ¯"    ??
 ;?? ק ??¯  ע? קנ ¢£ £. ? ??  ??   פ? ?¥ק ¢«ק ?¢  ק?ע¢?   ??
 ;?? פ ? «ק נ¯ Int09 נ ? נ? ?¢ ק  ??נ‎?¢? 5232 צ ?¢.   ??
 ;??                                                      ??
 ;??????????????????????????????????????????????????????????


 PROGRAM   segment
           assume CS:PROGRAM
           org   100h         ;פ ?פ£¡ע PSP ‎?¯ COM-פ ??  ??«

 Start:    jmp   InitProc     ;פ? ?¥?‎   ננ¦נ ?נ? ¦נ®


 ;ררררררררר ? ? ? ? ? ? ? ? ? ? ?   ? ? ? ? ? ? רררררררררררר

 FuncNum   equ   0EEh           ;?¡£©?¡¢ק£®© ¯ ₪£ע¦נ¯ פ ?-
                                ; «ק נ¯ BIOS Int16h
 CodeOut   equ   2D0Ch          ;ע?‎,ק??ק  © ??«?  ¨נ? ?צ-
                                ;  צ?¢§נע?? Int16h
 TestInt09 equ   9D0Ah          ;¡??ק? פ? ?‎ Int09h
 TestInt16 equ   3AFAh          ;¡??ק? פ? ?‎ Int16h

 OldInt09  label dword          ;¡?¥  ?«? ק?ע¢?  Int09h:
  OfsInt09 dw    ?              ;   ??? ¡??©?נ?
  SegInt09 dw    ?              ;   נ ¡????¢

 OldInt16  label dword          ;¡?¥  ?«? ק?ע¢?  Int16h:
  OfsInt16 dw    ?              ;   ??? ¡??©?נ?
  SegInt16 dw    ?              ;   נ ¡????¢

 OK_Text   db    0              ;פ נ? ע ? ¨?נ¯ ­ע   
 Sign      db    ?              ;ע???נ§?¡¢ק?  ? ¢נ? Ctrl
 VideoLen  equ   800h           ;‎?נ  קנ‎??צ£₪?  

 VideoBuf  db    160 dup(' ')
 db  13 dup(' ')
 db '‰?'
 db  26 dup(' ')
 db 'ף                                                    ף'
 db  26 dup(' ')
 db 'ף   ??¯   ?צ??ענ ?קענ  ??נ¢? ¢ נ   ?  LeftControl   ף'
 db  26 dup(' ')
 db 'ף                                                    ף'
 db  26 dup(' ')
 db 'ף                                                    ף'
 db  26 dup(' ')
 db 'ˆ?'
 db  2000 dup(' ')

 AttrBuf   db    VideoLen dup(07h)  ; ¢ נצ£¢« ­ע   
 VideoBeg  dw    0B800h         ; ‎ ?¡  § ?  קנ‎???צ? ¡¢נ
 VideoOffs dw    ?              ;¡??©?נ?  ע¢נק?? ¡¢  נ¦«
 CurSize   dw    ?              ;¡?¥  ?«?   ???  ע£ ¡?  

 ;רררררר ? ? ? ? ? ? ? ? ? ? ?   ? ? ? ? ? ? ? ? ? ררררררררר

 ;
 ;???????????? ?????? ???????????? ? ??????? ?????????

 VideoXcg proc
     lea   DI,VideoBuf   ;ק DI -  ‎ ?¡ צ£₪?   ¡נ?ק???ק
     lea   SI,AttrBuf    ;ק SI -  ‎ ?¡ צ£₪?    ¢ נצ£¢?ק

     mov   AX,VideoBeg   ;ץק ES - ¡????¢«?  ‎ ?¡
     mov   ES,AX         ;™ § ?  קנ‎???צ? ¡¢נ

     mov   CX,VideoLen   ;ק CX - ‎?נ  קנ‎??צ£₪?  
     mov   BX,VideoOffs  ;ק BX -  §. ¡??©?נ? ¡¢ ?ענ

   Draw:
     mov   AX,ES:[BX]    ;ץ?צ??¯¢¬ ¡נ?ק??/ ¢ נצ£¢  
     xchg  AH,DS:[SI]    ;?­ע  ? ¡ ¡נ?ק???? נ  ¢ נצ£-
     xchg  AL,DS:[DI]    ;?¢?? נ? צ£₪? ?ק
     mov   ES:[BX],AX    ;™

     inc   SI            ;ץ£ק??נ§נ¢¬  ‎ ?¡
     inc   DI            ;™ק צ£₪?  ¥

     inc   BX            ;ץ£ק??נ§נ¢¬  ‎ ?¡
     inc   BX            ;™ק קנ‎??צ£₪? ?

     loop  Draw          ;¡‎?? ¢¬ ‎?¯ ק¡?? קנ‎???צ? ¡¢נ
     ret                 ;ק??ק  ¢
 VideoXcg endp

 ;
 ;?????????? ?????????? Int09h (?????????? ?? ??????????)

     dw    TestInt09     ;¡??ק? ‎?¯ ?צ  £??נ¯ פ? ?¥ק ¢ 

 Int09Hand proc
     push  AX            ;ץ
     push  BX            ;?
     push  CX            ;?¡?¥  נ¢¬
     push  DI            ;?נ¡פ??¬?£??«?
     push  SI            ;? ??נ¡¢ «
     push  DS            ;?
     push  ES            ;™

     push  CS            ;ץ£ע ? ¢¬ DS  
     pop   DS            ;™ ¨£ פ ??  ??£

     in    AL,60h        ;פ??£§נ¢¬ ¡ע  ע?‎  ? ¢?? ע? קנ¨נ

     cmp   AL,26h        ;ץפ ?ק? נ¢¬   ¡ע -ע?‎ ע? קנ¨נ
     jne   Exit_09       ;™<L> נ ק«?¢נ, ?¡?נ ? ?

     xor   AX,AX         ;ץ
     mov   ES,AX         ;?פ ?ק? נ¢¬ ₪? ?נ ע? קנ ¢£ «  
     mov   AL,ES:[418h]  ;? ? ¢נ? <Ctrl+Alt>
     and   AL,03h        ;?
     cmp   AL,03h        ;?
     je    Cont          ;™

   Exit_09:
     jmp   Exit09        ;ק«¥?‎

   Cont:


     sti                 ;  ? ?¨נ¢¬ פ ? «ק נ¯

     mov   AH,0Fh        ;ץפ??£§נ¢¬ ¢?ע£©נ?
     int   10h           ;™קנ‎?? ??נ?
     cmp   AL,2          ;ץ
     je    InText        ;?פ? ??¢נ   InText
     cmp   AL,3          ;??¡?נ  ??נ?
     je    InText        ;?¢?ע¡¢?ק«? 80#25
     cmp   AL,7          ;?
     je    InText        ;™

     jmp   short SwLoop1 ;נ §? - פ ?פ£¡¢נ¢¬

  InText:
     xor   AX,AX         ;ץ£¡¢ ?קנ¢¬ ¡????¢«?
     mov   ES,AX         ;™ ‎ ?¡ ק 0000h

     mov   AX,ES:[44Eh]  ;ץפ??£§נ¢¬ ¡??©?נ?  ע¢נק??
     mov   VideoOffs,AX  ;™¡¢  נ¦« ק VideoOffs

     mov   AX,ES:[44Ch]  ;ץ¡  קנ¢¬ ‎?נ£ קנ‎??צ£₪?  
     cmp   AX,1000h      ;?¡ 1000h.?¡?נ ?   ק?,
     jne   Exit009       ;?¢?  ??נ? EGA Lines
                         ;™(­ע   ¢£¨נ¢¬ ?  ‎?)
     mov   AH,03h        ;ץנ §? ¡?¥  נ¢¬
     int   10h           ;?  ???  ע£ ¡?  
     mov   CurSize,CX    ;™ק CurSize

     mov   AH,01h        ;ץ
     mov   CH,20h        ;?נ פ?‎ קנ¢¬ ???
     int   10h           ;™

     mov   OK_Text,01h   ;£¡¢ ?קנ¢¬ פ נ? ע ? ¨?נ¯
                         ;­ע   
     call  VideoXcg      ;נ ק«?ק ¢¬ פ ?¦?‎£ £ ? ¨?נ¯

   SwLoop1:
     in    AL,60h        ;ק AL - ע?‎  ? ¢?? ע? קנ¨נ
     cmp   AL,1Dh        ;ץ?¡?נ  ? ¢  Ctrl - ¢?  
     je    SwLoop2       ;™פ ?ק? ע£ ?¢פ£¡ע נ¯
     cmp   AL,9Dh        ;ץ?¡?נ צ«?  ?¢פ£©?  Ctrl, ¢?
     je    SwLoop1       ;™‎ ?¬¨?   ?פ ?¡ ע? קנ ¢£ «
     mov   Sign,0        ;נ §? ¡צ ?¡נ¢¬ ע??-ק?  ? ¢נ?
     jmp   short SwLoop1 ;נ ¡?ק    ?פ ?¡ ע? קנ ¢£ «

   SwLoop2:
     in    AL,60h        ;ק AL - ¡ע  ע?‎ ע? קנ¨נ
     cmp   AL,9Dh        ;ץ?¡?נ ? ע?‎ ?¢פ£¡ע נ¯ Ctrl, ¢?
     jne   SwLoop2       ;™??נ‎ ¢¬ ?¢פ£¡ע נ¯ ע? קנ¨נ
     inc   Sign          ;£ק??נ§נ¢¬ ע??-ק? ק? ¢נ?   Ctrl
     cmp   Sign,3        ;ץ?¡?נ ?©? ?  ? ?נ 3-נ   ? ,¢?
     jne   SwLoop1       ;™פ? ??¢נ   ?פ ?¡ ע? קנ ¢£ «

     mov   Sign,0        ;¡צ ?¡נ¢¬ ע??-ק?  ? ¢נ?   Ctrl

     cmp   OK_Text,01h   ;ץ?¡?נ ­ע   ? צ«? ק«ע?®§?,
     jne   Exit009       ;™¢? ק«¥?‎

     call  VideoXcg      ;נ §? קע?®§נ¢¬ ­ע  

     mov   AH,01h        ;ץ
     mov   CX,CurSize    ;?ק?¡¡¢ ?קנ¢¬ ע£ ¡? 
     int   10h           ;™

     mov   OK_Text,0h    ;¡צ ?¡נ¢¬ פ נ? ע ? ¨?נ¯ ­ע   

   Exit009:
     xor   AX,AX         ;ץ
     mov   ES,AX         ;??§נ¡¢נ¢¬ ₪? ?נ  ? ¢נ¯
     mov   AL,ES:[417h]  ;?<Control+Alt> פ?  ‎ ?¡£
     and   AL,11110011b  ;?0000h:0417h נ ₪? ?נ
     mov   ES:[417h],AL  ;?<LeftControl+LeftAlt>
     mov   AL,ES:[418h]  ;?פ?  ‎ ?¡£ 0000h:0418h
     and   AL,11111100b  ;?
     mov   ES:[418h],AL  ;™

     mov   AL,20h        ;ץ?צ¡?£?נ¢¬ ע?¢ ???? 
     out   20h,AL        ;™פ ? «ק נ?

     cli                 ;? פ ?¢נ¢¬ פ ? «ק נ¯
     pop   ES            ;ץ
     pop   DS            ;?
     pop   SI            ;?ק?¡¡¢ ?קנ¢¬
     pop   DI            ;?נ¡פ??¬?£??«?
     pop   CX            ;? ??נ¡¢ «
     pop   BX            ;?
     pop   AX            ;™
     iret                ;ק«?¢נ נ? פ ? «ק נ¯

   Exit09:
     cli                 ;? פ ?¢נ¢¬ פ ? «ק נ¯
     pop   ES            ;ץ
     pop   DS            ;?
     pop   SI            ;?ק?¡¡¢ ?קנ¢¬
     pop   DI            ;?נ¡פ??¬?£??«?
     pop   CX            ;? ??נ¡¢ «
     pop   BX            ;?
     pop   AX            ;™
     jmp   CS:OldInt09   ;ץ;פ? ?‎ ¢¬ £פ  ק??נ? "פ? ¦?פ?§ע?"
                         ;™;¡??‎£®©??£ ?צ  צ?¢§נע£ Int09h
 Int09Hand endp

 ;
 ;?????????? ?????????? Int16h (????? ??????? BIOS)

     dw    TestInt16     ;¡??ק? ‎?¯ ?צ  £??נ¯ פ? ?¥ק ¢ 

 Presense proc
     cmp   AH,FuncNum    ;?צ  ©?נ? ?¢  ¨?? פ ??  ??«?
     jne   Pass          ;?¡?נ ?¢ ¢? נ§??? ? ‎?? ¢¬
     mov   AX,CodeOut    ;נ §? ק AX £¡??ק??«? ע?‎
     iret                ;נ ק??ק  ¢נ¢¬¡¯

   Pass:
     jmp   CS:OldInt16   ;פ? ?‎ ¢¬ £פ  ק??נ? "פ? ¦?פ?§ע?"
                         ;¡??‎£®©??£ ?צ  צ?¢§נע£ Int16h
 Presense endp


 ;רררררררר ? ? ? ? ? ? ? ? ? ? ? ? ?   ? ? ? ? ? ? ררררררררר

 ResEnd      db    ?    ;צ ?¢ ‎?¯ ?פ ?‎???נ¯ ?  נ¦«  ?-
                        ;?נ‎?¢?? § ¡¢נ פ ??  ??«
 On          equ   1    ;? §?נ? "£¡¢ ?ק??" ‎?¯  ₪? ??ק
 Off         equ   0    ;? §?נ? "¡צ ?¨?" ‎?¯ ₪? ??ק
 Bell        equ   7    ;ע?‎ ¡נ?ק??  BELL
 CR          equ   13   ;ע?‎ ¡נ?ק??  CR
 LF          equ   10   ;ע?‎ ¡נ?ק??  LF
 MinDosVer   equ   2    ;?ננ? ?¬ ¯ ק????? ¯ ק? ¡נ¯ DOS

 InstFlag    db    ?    ;₪? ?  ?נ§נ¯ פ ??  ??« ק פ ?¯¢נ
 SaveCS      dw    ?    ;¡?¥  ?«? CS  ??נ‎?¢?? פ ??-
                        ;  ??«

 Copyright   db CR,LF,' L O C K E R  ‎???¡¢  ¦נ? ¯ פ ?'
             db '?  ?? ',CR,LF,LF,'$'
 VerDosMsg   db '?¨נצע : ?ע?  ?ע¢ ¯ ק? ¡נ¯ DOS'
             db Bell,CR,LF,'$'
 InstMsg     db '? ??  ??  LOCKER £¡¢ ?ק?? .??¯ ¡¯¢נ¯ נ¡'
             db 'פ??¬?£?¢? ע?®§ /u',CR,LF
             db '??¯ "? פנ  נ¯"  ??נ¢? <Ctrl+Alt+L>',CR,LF
             db '??¯ "?¢פנ  נ¯" ¢ נ?‎«  ??נ¢? <Ctrl>'
             db CR,LF,'$'
 AlreadyMsg  db '?¨נצע : LOCKER £??  ??נ‎?¢  ק פ ?¯¢נ'
             db Bell,CR,LF,'$'
 UninstMsg   db '? ??  ??  LOCKER ¡¯¢  ¡  ??נ‎?¢ '
             db CR,LF,'$'
 NotInstMsg  db '?¨נצע : פ ??  ??  LOCKER ? £¡¢ ?ק?? '
             db Bell,CR,LF,'$'
 NotSafeMsg  db '?¨נצע : ¡¯¢¬ ¡  ??נ‎?¢  פ ??  ??£ LOCKER'
             db ' ק ‎ «? ????¢',CR,LF,'?ק?????? נ?-?  '
             db 'פ? ?¥ק ¢  ?ע?¢? «¥ ק?ע¢? ?ק',Bell,CR,LF,'$'


 ;רררררר ? ? ? ? ? ? ? ? ? ? ? ? ?   ? ? ? ? ? ? ? ? ? ררררר

 ;
 ;?????????? ???? ??? ?????????? ????????? ?????? ??????????

 Locker      equ   0      ;נ?¯ ‎?¯ נ‎?¢נ₪נע ¦ננ פp??p ??«
                          ;ק? קע?®§ ???? ₪ ???
 include     INFO.INC     ;קע?®§ ??«? ₪ ?? ¡ פ ?¦?‎£ ?? ק«-
                          ;ק?‎  נ₪? ? ¦ננ

 ;
 ;??????? ????????? ?????????????

 InitProc proc
     mov   AH,09h          ;ץ
     lea   DX,Copyright    ;?ק«ק?¡¢נ  § ?¬?? ¡??צ©?נ?
     int   21h             ;™

     lea   DX,VerDosMsg    ;ץפ ?ק? נ¢¬ ק? ¡נ® DOS נ ק«-
     call  ChkDosVer       ;?ק?¡¢נ ¡??צ©?נ?,?¡?נ ?פ?‎-
     jc    Output          ;™¥?‎¯© ¯

     call  PresentTest     ;פ ?ק? נ¢¬  ?נ§נ? ק פ ?¯¢נ

     mov   BL,DS:[5Dh]     ;ץ
     and   BL,11011111b    ;?
     cmp   BL,'I'          ;?  ??צ  ¢¬ ע?®§ (? ?¡נ¢¡¯
     je    Install         ;?ק ?צ? ¡¢¬ FCB1 PSP)
     cmp   BL,'U'          ;?
     je    Uninst          ;™

     call  @InfoAbout      ;ק«ק?¡¢נ נ₪? ? ¦נ®
     jmp   short ToDos     ;נ ק? £¢¬¡¯ ק DOS
                           ;?¡?נ ע?®§ ? ¢?¢
   Install:
     lea   DX,AlreadyMsg
     cmp   InstFlag,On     ;ץ?¡?נ £?? £¡¢ ?ק?? ,¢?
     je    Output          ;™פ? ??¢נ   ק«ק?‎ ¡??צ©?נ¯

     xor   AX,AX           ;ץנ §? פ??£§נ¢¬  § ??
     mov   ES,AX           ;?קנ‎???צ? ¡¢נ : ?¡?נ ק צ ?¢? פ?
     mov   AL,ES:[411h]    ;? ‎ ?¡£ 0000h:0411h £¡¢ ?ק??
     and   AL,30h          ;?3-? צנ¢,¢? ¡????¢«?  ‎ ?¡  -
     cmp   AL,30h          ;?§ ?  קנ‎???צ? ¡¢נ 0B000h נ §?
     jne   Vid1            ;?¡????¢«?  ‎ ?¡   ק? 0B800h
     mov   VideoBeg,0B000h ;™

   Vid1:
     call  GrabIntVec      ;? ¥ק ¢נ¢¬ £?«? ק?ע¢?  

     mov   AX,DS:[2Ch]     ;ץ?¡ק?צ?‎נ¢¬ ?ע £??נ?,ק«‎???-
     mov   ES,AX           ;??? פ ??  ??? ‎?¯ £??¬¨?נ¯
     mov   AH,49h          ;?? נ? ???? ק  ??נ‎?¢? פ ?¯¢נ
     int   21h             ;™

     mov   AH,09h          ;ץק«ק?¡¢נ ¡??צ©?נ? ?צ £¡¢ ?קע?
     lea   DX,InstMsg      ;?ק  ??נ‎?¢
     int   21h             ;™

     lea   DX,ResEnd       ;ץ? ק? ¨נ¢¬ נ ?¡¢ קנ¢¬ פ ??  ?-
     int   27h             ;™?£ ק  ??נ‎?¢?

   Uninst:
     lea   DX,NotInstMsg   ;ץ?¡?נ פ ??  ??  ? £¡¢ ?ק?? ,
     cmp   InstFlag,Off    ;?¢? ק«ק?¡¢נ ¡??צ©?נ? ?צ ­¢??
     je    Output          ;™

     lea   DX,NotSafeMsg   ;ץ?¡?נ פ ??  ??£ ?ק??????
     call  TestIntVec      ;?¡¯¢¬ ¡  ??נ‎?¢ ,¢? ק«ק?¡¢נ
     jc    Output          ;™¡??צ©?נ? ?צ ­¢??

     call  FreeIntVec      ;?¡ק?צ?‎נ¢¬ ק?ע¢?   פ ? «ק נ?

     mov   AH,49h          ;ץ?¡ק?צ?‎נ¢¬ פ ?¯¢¬,? נ? ??£®
     mov   ES,SaveCS       ;? ??נ‎?¢?? § ¡¢¬® פ ??  ??«
     int   21h             ;™

     lea   DX,UninstMsg

   Output:
     mov   AH,09h          ;ץק«ק?¡¢נ £??? ¡??צ©?נ?
     int   21h             ;™

   ToDos:
     mov   AX,4C00h        ;ץק? £¢¬¡¯ ק DOS ¡ ע?‎??
     int   21h             ;™? ק? ¨?נ¯ 0
     ret                   ;ק??ק  ¢
 InitProc endp

 ;
 ;????????? ???????? ?????? DOS
 ;ק??ק  © ?¢ £¡¢ ?ק??«? ₪? ? פ? ??¡ ,?¡?נ
 ;ק? ¡נ¯ DOS ??¬¨? ? ‎ ?? ק MinDosVer

 ChkDosVer proc
     mov   AH,30h         ;ץפ??£§נ¢¬ ק AX ???  ק? ¡ננ
     int   21h            ;™DOS
     cmp   AL,MinDosVer   ;¡  קנ¢¬ ?? ¡ ?ננ? ?¬??

     clc                  ;¡צ ?¡נ¢¬ ₪? ? פ? ??¡  (CF)
     jge   Norma          ;?¡?נ ק? ¡נ¯ פ?‎¥?‎¯© ¯
     stc                  ;נ §? £¡¢ ?קנ¢¬ ₪? ? פ? ??¡ 

   Norma:
     ret                  ;ק??ק  ¢
 ChkDosVer endp

 ;
 ;????????? ??????????? ??????? ????????? ? ??????

 PresentTest proc
     mov   InstFlag,Off   ;¡צ ?¡נ¢¬ ₪? ?  ?נ§נ¯ ק  ??נ‎?¢?
     mov   AH,FuncNum     ;ץ?צ  ¢נ¢¬¡¯ ע  ¨??£ פ ?¦?¡¡£
     int   16h            ;™
     cmp   AX,CodeOut     ;פ??£§נ?נ ?¢ק?¢?
     jne   Return         ;?¡?נ ?¢,¢? ע??¦
     mov   InstFlag,On    ;נ §? £¡¢ ?קנ¢¬ ₪? ?  ?נ§נ¯
   Return:
     ret                  ;ק??ק  ¢
 PresentTest endp

 ;
 ;????????? ??????? ???????? ??????????

 GrabIntVec proc
     mov   AX,3509h       ;ץ¡?¥  נ¢¬ ק? ק£¢ ?נ¥ פ? ?-
     int   21h            ;???«¥ ¡¢  «? ק?ע¢?  פ ? «ק -
     mov   OfsInt09,BX    ;?נ¯ Int09h
     mov   SegInt09,ES    ;™

     mov   AX,3516h       ;ץ¡?¥  נ¢¬ ק? ק£¢ ?נ¥ פ? ?-
     int   21h            ;???«¥ ¡¢  «? ק?ע¢?  פ ? «ק -
     mov   OfsInt16,BX    ;?נ¯ Int16h
     mov   SegInt16,ES    ;™

     mov   AX,2509h       ;ץ£¡¢ ?קנ¢¬ Int09Hand ק ע §?¡¢ק?
     lea   DX,Int09Hand   ;??ק??? ?צ  צ?¢§נע  פ ? «ק נ¯
     int   21h            ;™Int09

     mov   AX,2516h       ;ץ£¡¢ ?קנ¢¬ Presense ק ע §?¡¢ק?
     lea   DX,Presense    ;??ק??? ?צ  צ?¢§נע  פ ? «ק נ¯
     int   21h            ;™Int16h
     ret
 GrabIntVec endp

 ;
 ;????????? ???????? ????????? ???????? ??????????
 ;ק??ק  © ?¢ £¡¢ ?ק??«? ₪? ? פ? ??¡  ק ¡?£§ ? פ? ?¥ק ¢ 
 ;¥?¢¯ צ« ?‎??? ק?ע¢?   פ ? «ק נ¯

 TestIntVec proc
     mov   AX,3509h            ;ץפ ?ק? נ¢¬, ¥?‎נ¢¡¯ ?נ ע?-
     int   21h                 ;?‎?ק?? ¡??ק? פ? ?‎ ?צ  צ?¢-
     cmp   ES:[BX-2],TestInt09 ;™§נע?? פ ? «ק נ¯ Int09
     stc                       ;£¡¢ ?קנ¢¬ ₪? ? פ? ??¡  CF,
     jne   Cant                ;?¡?נ פ ? «ק נ? פ? ?¥ק ¢נ?נ

     mov   AX,3516h            ;ץפ ?ק? נ¢¬, ¥?‎נ¢¡¯ ?נ ע?-
     int   21h                 ;?‎?ק?? ¡??ק? פ? ?‎ ?צ  צ?¢-
     cmp   ES:[BX-2],TestInt16 ;™§נע?? פ ? «ק נ¯ Int16h
     stc                       ;£¡¢ ?קנ¢¬ ₪? ? פ? ??¡  CF,
     jne   Cant                ;?¡?נ פ ? «ק נ? פ? ?¥ק ¢נ?נ

     mov   SaveCS,ES           ;? פ??נ¢¬ CS  ??נ‎?¢??
     clc                       ;פ ??  ??«,¡צ ?¡נ¢¬ ₪? ?
                               ;פ? ??¡ 
   Cant:
     ret                       ;ק??ק  ¢
 TestIntVec endp

 ;
 ;????????? ?????????????? ??????????? ???????? ??????????

 FreeIntVec proc
     push  DS             ;¡?¥  נ¢¬ DS

     mov   AX,2509h       ;ץק?¡¡¢ ?קנ¢¬ ק?ע¢?  פ ? «ק נ¯
     mov   DS,ES:SegInt09 ;?Int09h נ? ק£¢ ?נ¥ פ? ???«¥
     mov   DX,ES:OfsInt09 ;? ??נ‎?¢?? פ ??  ??«
     int   21h            ;™

     mov   AX,2516h       ;ץק?¡¡¢ ?קנ¢¬ ק?ע¢?  פ ? «ק נ¯
     mov   DS,ES:SegInt16 ;?Int16h נ? ק£¢ ?נ¥ פ? ???«¥
     mov   DX,ES:OfsInt16 ;? ??נ‎?¢?? פ ??  ??«
     int   21h            ;™

     pop   DS             ;ק?¡¡¢ ?קנ¢¬ DS
     ret                  ;ק??ק  ¢
 FreeIntVec endp

 PROGRAM   ends
           end   Start